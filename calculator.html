<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport"
        content="width=device-width, height=device-height, minimum-scale=1, maximum-scale=1, user-scalable=no, initial-scale=1">
    <title>Calculator</title>
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/calc.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <div class="loader" id="loader">
        <div class="clock-loader"></div>
    </div>
    <c-nav></c-nav>
    <div class="calcui">
        <div class="calculator dark">
            <div class="display-screen">
                <input id="display">
            </div>
            <div class="buttons">
                <table>
                    <tr>
                        <td><button class="btn-number" id="7">7</button></td>
                        <td><button class="btn-number" id="8">8</button></td>
                        <td><button class="btn-number" id="9">9</button></td>
                        <td><button class="btn-operator" id="clear">C</button></td>
                    </tr>
                    <tr>
                        <td><button class="btn-number" id="4">4</button></td>
                        <td><button class="btn-number" id="5">5</button></td>
                        <td><button class="btn-number" id="6">6</button></td>
                        <td><button class="btn-operator" id="backspace">< </button></td>
                    </tr>
                    <tr>
                        <td><button class="btn-number" id="1">1</button></td>
                        <td><button class="btn-number" id="2">2</button></td>
                        <td><button class="btn-number" id="3">3</button></td>
                        <td rowspan="2"><button class="btn-equal" id="equal">=</button></td>
                    </tr>
                    <tr>
                        <td><button class="btn-operator" id="toggleMode">deg</button></td>
                        <td><button class="btn-number" id="0">0</button></td>
                        <td><button class="btn-operator" id=".">.</button></td>
                    </tr>
                </table>
            </div>
            <button class="more-btn">More</button>
        </div>
        <div class="c2">
                <div class="buttons">
                    <table class="resizable-table" id="myTable">
                        <tr>
                            <td><button class="btn-operator" id="+">+</button></td>
                            <td><button class="btn-operator" id="-">-</button></td>
                            <td><button class="btn-operator" id="/">&divide;</button></td>
                            <td><button class="btn-operator" id="*">&times;</button></td>
                            <td><button class="btn-operator" id="(">(</button></td>
                            <td><button class="btn-operator" id=")">)</button></td>
                            <td><button class="btn-operator" id="^">^</button></td>
                            <td><button class="btn-operator" id="%">%</button></td>
                        </tr>
                        <tr>                            
                            <td><button class="btn-operator" id="!">!</button></td>
                            <td><button class="btn-operator" id="e">e</button></td>
                            <td><button class="btn-operator" id="π">&pi;</button></td>
                            <td><button class="btn-operator" id="ln(">ln</button></td>
                            <td><button class="btn-operator" id="√">&#x221A;</button></td>
                            <td><button class="btn-operator" id="∛">&#x221B;</button></td>
                            <td><button class="btn-operator" id="log(">log</button></td>
                            <td><button class="btn-operator" id="1/">1/x</button></td>
                        </tr>
                        <tr>
                            <td><button class="btn-operator" id="sin(">sin</button></td>
                            <td><button class="btn-operator" id="cos(">cos</button></td>
                            <td><button class="btn-operator" id="tan(">tan</button></td>
                            <td><button class="btn-operator" id="asin(">sin⁻¹</button></td>
                            <td><button class="btn-operator" id="acos(">cos⁻¹</button></td>
                            <td><button class="btn-operator" id="atan(">tan⁻¹</button></td>
                            <td><button class="btn-operator" id="|">| |</button></td>
                            <td><button class="btn-operator" id=""></button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <section class="calculators">
            <div class="calculator1 bmi">
                <div class="bmidiv">
                    <div class="bmi-text"><span class="">BMI</span> Calculator</div>
                    <input id="height" type="text" placeholder="Height (in cm)">
                    <input id="weight" type="text" placeholder="Weight (in kg)">
                    <button class="submit-bmi">Check</button>
                    <div class="bmi-result" id="bmiResult"></div>
                    <div class="bmi-slider">
                        <div class="bmi-scale">
                            <div class="bmi-category underweight">UW</div>
                            <div class="bmi-category healthy">HW</div>
                            <div class="bmi-category overweight">OW</div>
                            <div class="bmi-category obese">OB</div>
                        </div>
                        <div class="bmi-indicator" id="bmiIndicator">▼</div>
                    </div>
                </div>
            </div>
    
            <div class="calculator1 equation-solver">
                <div class="bmidiv">
                    <div class="bmi-text"><span class="">Eqn</span> Solver</div>
                    <select id="variable-count">
                        <option value="2">2 Variables</option>
                        <option value="3">3 Variables</option>
                    </select>
                    <div id="equations-input">
                        <input id="eq1" type="text" placeholder="Equation 1 (e.g., 2x + 3y = 6)">
                        <input id="eq2" type="text" placeholder="Equation 2 (e.g., x - y = 1)">
                    </div>
                    <button class="submit-equation">Solve</button>
                    <div class="equation-result" id="equationResult"></div>
                </div>
            </div>
            
            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
            <script>
                function solveEquations() {
                    const variableCount = document.getElementById('variable-count').value;
                    const eq1 = document.getElementById('eq1').value.trim();
                    const eq2 = document.getElementById('eq2').value.trim();
                    const eq3 = variableCount === '3' ? document.getElementById('eq3').value.trim() : null;
            
                    try {
                        const equations = [eq1, eq2];
                        if (eq3) equations.push(eq3);
                        const result = solveSystemOfEquations(equations);
                        displayEquationResult(result);
                    } catch (error) {
                        alert('Invalid equations. Please enter valid equations.');
                    }
                }
            
                function displayEquationResult(result) {
                    const equationResultDiv = document.getElementById('equationResult');
                    equationResultDiv.textContent = `Solution: ${result}`;
                }function solveSystemOfEquations(equations) {
    try {
        const variables = ['x', 'y', 'z'];
        const variableCount = equations.length;

        const matrix = [];
        const constants = [];

        equations.forEach(eq => {
            const [lhs, rhs] = eq.split('=').map(side => side.trim());
            if (!rhs || isNaN(rhs)) throw new Error("Invalid equation format");

            const coefficients = variables.slice(0, variableCount).map(v => {
                const match = lhs.match(new RegExp(`[+-]?\\d*\\.?\\d*${v}`));
                if (match) {
                    const num = match[0].replace(v, '');
                    return num === '' || num === '+' ? 1 : num === '-' ? -1 : parseFloat(num);
                }
                return 0;
            });

            matrix.push(coefficients);
            constants.push(parseFloat(rhs));
        });

        const result = math.lusolve(matrix, constants);
        return result
            .map((val, index) => `${variables[index]} = ${val[0].toFixed(2)}`)
            .join(', ');
    } catch (error) {
        return 'Invalid or unsolvable system.';
    }
}

function displayEquationResult(result) {
    const equationResultDiv = document.getElementById('equationResult');
    equationResultDiv.textContent = `Solution: ${result}`;
}

function solveEquations() {
    const variableCount = document.getElementById('variable-count').value;
    const eq1 = document.getElementById('eq1').value;
    const eq2 = document.getElementById('eq2').value;
    const eq3 = variableCount === '3' ? document.getElementById('eq3').value : null;

    try {
        const equations = [eq1, eq2];
        if (eq3) equations.push(eq3);
        const result = solveSystemOfEquations(equations);
        displayEquationResult(result);
    } catch (error) {
        alert('Invalid equations. Please enter valid equations.');
    }
}

document.querySelector('.submit-equation').addEventListener('click', solveEquations);

document.getElementById('variable-count').addEventListener('change', function () {
    const variableCount = this.value;
    const equationsInputDiv = document.getElementById('equations-input');
    equationsInputDiv.innerHTML = `
        <input id="eq1" type="text" placeholder="Equation 1 (e.g., 2x + 3y = 6)">
        <input id="eq2" type="text" placeholder="Equation 2 (e.g., x - y = 1)">
    `;
    if (variableCount === '3') {
        const eq3Input = document.createElement('input');
        eq3Input.id = 'eq3';
        eq3Input.type = 'text';
        eq3Input.placeholder = 'Equation 3 (e.g., x + y + z = 3)';
        equationsInputDiv.appendChild(eq3Input);
    }
});


                document.querySelector('.submit-equation').addEventListener('click', solveEquations);
            
                document.getElementById('variable-count').addEventListener('change', function () {
                    const variableCount = this.value;
                    const equationsInputDiv = document.getElementById('equations-input');
                    equationsInputDiv.innerHTML = `
                        <input id="eq1" type="text" placeholder="Equation 1 (e.g., 2x + 3y = 6)">
                        <input id="eq2" type="text" placeholder="Equation 2 (e.g., x - y = 1)">
                    `;
                    if (variableCount === '3') {
                        const eq3Input = document.createElement('input');
                        eq3Input.id = 'eq3';
                        eq3Input.type = 'text';
                        eq3Input.placeholder = 'Equation 3 (e.g., x + y + z = 3)';
                        equationsInputDiv.appendChild(eq3Input);
                    }
                });
            </script>
            
    <script src="assets/js/calc.js"></script>    
    <script>
        const headerUrl = 'components/navbar.html';

        function loadHeader() {
            const cNav = document.querySelector('c-nav');
            fetch(headerUrl)
                .then((response) => response.text())
                .then((headerHtml) => {
                    cNav.innerHTML = headerHtml;
                })
                .catch((error) => {
                    console.error('Error loading header:', error);
                });
        }

        loadHeader();
        document.getElementById('loader').style.display = 'block';
        document.addEventListener('DOMContentLoaded', function () {
            const currentTime = new Date().getTime();
            const loadTime = currentTime - window.performance.timing.navigationStart;
            const remainingTime = Math.max(3000 - loadTime, 0);
            setTimeout(function () {
                document.getElementById('loader').classList.add('hide');
                document.body.classList.remove('disabledScroll');
                var navbar = document.querySelector('c-nav');
                if (navbar) {
                    navbar.classList.add('slide-in-down');
                }
            }, remainingTime);
        });
    </script>
</body>

</html>